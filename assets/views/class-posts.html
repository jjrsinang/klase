<div ng-controller="ClassFeedCtrl as feed" class="feed-container">
    <div class="post-input img-rounded">
        
        <!-- tabs -->
        <ul class="nav nav-tabs" ng-hide="loggedInUserRole == 'Student'">
            <li ng-class="{ active:isSet(1) }">
                <a href ng-click="setTab(1)">Post</a>
            </li>
            <li ng-class="{ active:isSet(2) }">
                <a href ng-click="setTab(2)">Activity</a>
            </li>
        </ul>
        
        <!-- post note 
        <form ng-show="isSet(1) && loggedInUserRole != 'Student'" 
                id="uploadForm"
                enctype="multipart/form-data"
                action="/file/upload"
                method="post">
            <textarea ng-model="message" name="message" class="form-control" rows="3" placeholder="Type your note here"></textarea>
            <input type="hidden" value="{{ section.id }}" name="sectionId" />
            <input type="hidden" value="{{ loggedInUserId }}" name="posterId" />
            <span class="btn btn-default btn-file">
                Browse <input type="file" ng-model="file" name="uploadFile" fileread="file" onchange='$("#upload-file-class-feed-post").html($(this).val());' />
            </span>
            <span id="upload-file-class-feed-post"></span>
            
            <input type="submit" class="btn btn-primary" value="Post" ng-click="post()">
        </form>
        -->
        <!-- test post -->
        <form ng-show="isSet(1) && loggedInUserRole != 'Student'" name="form">
            <textarea ng-model="message" name="message" class="form-control" rows="3" placeholder="Type your note here"></textarea>
            
            <div class="btn btn-default btn-file" ngf-select ng-model="file" name="file"
                ngf-max-size="'20MB'" ngf-min-height="100" 
                ngf-resize="{width: 100, height: 100}">Select</div>
            <button type="submit" class="btn btn-primary" ng-click="submit()">submit</button>
        </form>
          
          <!--Upload right away after file selection:-->
          <!--<div class="button" ngf-select="upload($file)">Upload on file select</div>-->
        
        <!-- post assignment -->
        <form ng-show="isSet(2) && loggedInUserRole != 'Student'">
            <input type="text" class="form-control" ng-model="todo" placeholder="Assignment title">
            
            <textarea class="form-control" rows="3" placeholder="Assignment description"></textarea>
            <label class="checkbox-inline"><input type="checkbox" value="">Disable after due date</label>
            <span class="btn btn-default btn-file">
                Browse <input type="file" onchange='$("#upload-file-section-assignment").html($(this).val());'>
            </span>
            <span id="upload-file-section-assignment"></span>
            <input type="submit" class="btn btn-primary" value="Post">
        </form>
        
    </div>
    
    <!-- posts in feed -->
    <div ng-repeat="post in posts | orderBy: 'postDate' : true" class="post img-rounded">
        <img class="small-avatar" ng-src="images/yeoman.png" />
        <span class="poster-name" ><a href>{{ post.poster.fName + " " + post.poster.lName }}</a></span>
        <a href="" style="color: red; float: right;" ng-click="deletePost(post.id)" ng-show="loggedInUserId == post.poster.id">Delete</a>
        <br />
        <span class="post-timestamp" >{{ post.postDate | date: 'EEE MMM d, yyyy h:mm a' }}</span>
        <br />
        <br />
        <p>{{ post.message }}</p>
        <a href="{{ origin + '/images/' + post.filename }}" target="_blank" class="btn btn-primary" ng-hide="{{ post.filename.length == 0 || post.filename == null }}">
            <span class="glyphicon glyphicon-file"></span>{{ post.file }}
        </a>
        <hr>
        <span ><a href><span class="glyphicon glyphicon-comment"></span> Respond</a></span>
    </div>
    
</div>